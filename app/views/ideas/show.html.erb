<% if @warning %>
  <p>Sorry, we can't find this particular idea.</p>
<% else %>
  <% if @version_warning %>
    <p>Sorry, we can't find that version of the idea&mdash;showing you the latest one.</p>
  <% end %>

  <p>Current votes: <%= @upvotes %></p>

  <% if @is_current_users %>
    <%= render 'idea_controls_owner', local: { idea: @idea } %>
  <% else %>
    <%= render 'idea_controls_visitor', local: { vote: @vote, idea: @idea, version: @version, past_vote: @has_voted_in_the_past, already_voted: @has_already_voted } %>
  <% end %>

  <h1><%= @idea.name %> <small>version #<%= @version.number %></small> <% if @is_old_version %><small>old version</small><% end %></h1>

  <% if !@is_current_users %>
  <h2>by <%= @current_user.username %></h2>
  <% end %>

  <h3><%= @version.goal %></h3>

  <p><%= @version.content %></p>

  <footer class="idea-footer">
    <% if @version.number > 1 %>
      <%= link_to 'previous version', idea_path(id: @idea.id, version: @version.number - 1) %>
    <% end %>

    <% if @is_old_version %>
      <%= link_to_unless(@version.number + 1 != @version_count, 'newest version', idea_path(@idea.id)) do |link_params|
        link_to 'next version', idea_path(id: @idea.id, version: @version.number + 1)
      end %>
    <% end %>

  </footer>
<% end %>
